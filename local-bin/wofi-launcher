#!/usr/bin/env bash

applications() {
  wofi --show drun --allow-images --show-icons --prompt "Search something . . ."
}

emoji() {
  rofimoji --selector wofi --clipboard wl-copy --action copy
}

help_menu() {
  wofi-keybinds
}

# Ordered entries: "Label|function"
menu_entries=(
  "üì¶ Applications|applications"
  "üòÄ Emoji|emoji"
  "‚öôÔ∏è Help|help_menu"
  "‚èª Power|wofi-power"
)

# Extract labels for display
labels=$(printf "%s\n" "${menu_entries[@]}" | cut -d'|' -f1)

choice=$(printf "%s\n" "$labels" | \
  wofi --dmenu \
     --prompt "Menu, search something" \
     --location top_left \
     --width 300 \
     --height 275)

# Execute matching function
for entry in "${menu_entries[@]}"; do
  label="${entry%%|*}"
  action="${entry##*|}"
  [[ "$choice" == "$label" ]] && "$action"
done
